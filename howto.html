<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>如何使用-TAIWANFRP</title>
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-image: url('img/background.png');
            background-size: cover;
            color: #fff;
        }

        header {
            background-color: #fff;
            color: #333;
            padding: 20px;
            text-align: center;
            position: relative;
            padding-top: 60px;
        }

        input {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .auth-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .auth-buttons a,
        .auth-buttons button {
            color: #ffbf00;
            background-color: #333;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            border: none;
            cursor: pointer;
            display: inline-block;
            font-size: calc(10px + 0.5vw);
        }

        .auth-buttons a:hover,
        .auth-buttons a:focus,
        .auth-buttons button:hover,
        .auth-buttons button:focus {
            color: #fff;
        }

        section {
            margin: 20px;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            background-color: rgba(255, 255, 255, 0.7);
        }

        h2 {
            color: #000;
        }

        p {
            color: #000;
        }

        .video-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .video-container iframe {
            width: 80%;
            max-width: 800px;
            height: 450px;
        }

        .message-box {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            z-index: 1001;
        }
        .message-box button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #333;
            color: #ffbf00;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7462519862770683"
     crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const username = document.cookie.split('; ').find(row => row.startsWith('username='));
            const password = document.cookie.split('; ').find(row => row.startsWith('password='));
            const isLoggedIn = username && password;
            const loginButton = document.getElementById('login-button');
            const registerButton = document.getElementById('register-button');
            const logoutButton = document.getElementById('logout-button');
            const deleteAccountButton = document.getElementById('delete-account-button');

            if (isLoggedIn) {
                loginButton.style.display = 'none';
                registerButton.style.display = 'none';
                logoutButton.style.display = 'inline';
                deleteAccountButton.style.display = 'inline';
            } else {
                loginButton.style.display = 'inline';
                registerButton.style.display = 'inline';
                logoutButton.style.display = 'none';
                deleteAccountButton.style.display = 'none';
            }

            logoutButton.addEventListener('click', function() {
                confirmLogout();
            });

            deleteAccountButton.addEventListener('click', function() {
                confirmDeleteAccount();
            });
        });

        function showMessage(message, success = false, callback = null) {
            const messageBox = document.getElementById('message-box');
            const overlay = document.getElementById('overlay');
            messageBox.innerHTML = `<p>${message}</p>`;
            if (success) {
                messageBox.innerHTML += `<button onclick="window.location.href='index.html'">確定</button>`;
            } else {
                messageBox.innerHTML += `<button onclick="hideMessage()">取消</button>`;
            }
            if (callback) {
                messageBox.innerHTML += `<button onclick="${callback}">確定</button>`;
            }
            messageBox.style.display = 'block';
            overlay.style.display = 'block';
            document.addEventListener('keydown', handleEnterKey);
        }

        function hideMessage() {
            document.getElementById('message-box').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            document.removeEventListener('keydown', handleEnterKey);
        }

        function handleEnterKey(event) {
            if (event.key === 'Enter') {
                const button = document.querySelector('.message-box button');
                if (button) {
                    button.click();
                }
            }
        }

        function confirmLogout() {
            const messageBox = document.getElementById('message-box');
            const overlay = document.getElementById('overlay');
            messageBox.innerHTML = `
                <p>確定要登出嗎？</p>
                <div style="margin-top: 10px;">
                    <button onclick="hideMessage()" style="margin-right: 20px;">取消</button>
                    <button onclick="logout()">確定</button>
                </div>
            `;
            messageBox.style.display = 'block';
            overlay.style.display = 'block';
            document.addEventListener('keydown', handleEnterKey);
        }

        function confirmDeleteAccount() {
            const messageBox = document.getElementById('message-box');
            const overlay = document.getElementById('overlay');
            messageBox.innerHTML = `
                <p>確定要註銷帳號嗎？這將刪除所有代理和端口，無法復原。</p>
                <div style="margin-top: 10px;">
                    <label for="delete-password">請輸入密碼確認:</label>
                </div>
                <div style="margin-top: 10px;">
                    <input type="password" id="delete-password" name="delete-password" required>
                </div>
                <div style="margin-top: 10px;">
                    <button onclick="hideMessage()" style="margin-right: 20px;">取消</button>
                    <button onclick="deleteAccount()">確定</button>
                </div>
            `;
            messageBox.style.display = 'block';
            overlay.style.display = 'block';
            document.addEventListener('keydown', handleEnterKey);
        }

        async function logout() {
            const response = await fetch('https://taiwanfrp.ddns.net/logout', { method: 'POST' });
            if (response.ok) {
                document.cookie = 'username=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
                document.cookie = 'password=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
                window.location.href = 'index.html';
            } else {
                showMessage('登出失敗');
            }
        }

        async function deleteAccount() {
            const password = document.getElementById('delete-password').value;
            const username = document.cookie.split('; ').find(row => row.startsWith('username=')).split('=')[1];
            const response = await fetch('https://taiwanfrp.ddns.net/delete_account', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ username, password })
            });

            if (response.ok) {
                showMessage('帳號已成功註銷', true);
                document.cookie = 'username=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
                document.cookie = 'password=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
            } else {
                showMessage('註銷失敗: ' + await response.text());
            }
        }
    </script>
</head>
<body>
    <header>
        <h1>如何使用 TAIWANFRP</h1>
        <div class="auth-buttons">
            <a href="index.html">返回主畫面</a>
            <a href="reg.html" id="register-button">註冊</a>
            <a href="login.html" id="login-button">登入</a>
            <a href="#" id="logout-button" style="display: none;">登出</a>
            <button id="delete-account-button" style="display: none;">註銷帳號</button>
        </div>
    </header>
    <section>
        <h2>Windows 架設Minecraft伺服器教學</h2>
        <div class="video-container">
            <iframe src="https://www.youtube.com/embed/enPVl-_HLV8" frameborder="0" allowfullscreen></iframe>
        </div>
    </section>
    <section>
        <h2>macOS 架設Minecraft伺服器教學</h2>
        <div class="video-container">
            <iframe src="https://www.youtube.com/embed/vzbYX3olqn8" frameborder="0" allowfullscreen></iframe>
        </div>
    </section>
    <section>
        <h2>Linux 架設Minecraft伺服器教學</h2>
        <p>Linux 沒有教學影片。我相信 Linux 的用戶都是高手會用這套軟體，不會可以參考 macOS 的教學。</p>
    </section>
    <div id="message-box" class="message-box"></div>
    <div id="overlay" class="overlay"></div>
</body>
</html>
